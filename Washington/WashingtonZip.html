xhttps://www.findchildcarewa.org/PSS_Search?q=98930&p=DEL%20Licensed



<!DOCTYPE HTML>
<html style="display:none !important;"><head><script src="/static/111213/js/perf/stub.js" type="text/javascript"></script><script src="/jslibrary/1530643972000/sfdc/VFRemote.js" type="text/javascript"></script><script>(function(UITheme) {
    UITheme.getUITheme = function() {
        return UserContext.uiTheme;
    };
}(window.UITheme = window.UITheme || {}));</script><script type="text/javascript">
Visualforce.remoting.Manager.add(new $VFRM.RemotingProviderImpl({"vf":{"vid":"066t0000000Cg99","xhr":false,"dev":false,"tst":false,"dbg":false,"tm":1534280419701,"ovrprm":false},"actions":{"PSS_SearchController":{"ms":[{"name":"getKeys","len":7,"ns":"","ver":39.0,"csrf":"VmpFPSxNakF4T0Mwd09DMHhOMVF5TVRvd01Eb3hPUzQzTURGYSw0ZnZvRXByZThDLXM4cW5tMEVIZzdELE4yWmxOV1ky"},{"name":"queryProviders","len":1,"ns":"","ver":39.0,"csrf":"VmpFPSxNakF4T0Mwd09DMHhOMVF5TVRvd01Eb3hPUzQzTURKYSxuMGlCajNkR2Z4eTkyZGgxZk04ZmNDLFl6VXdObVk1"}],"prm":1}},"service":"apexremote"}));
</script><script>(function(UITheme) {
    UITheme.getUITheme = function() {
        return UserContext.uiTheme;
    };
}(window.UITheme = window.UITheme || {}));</script><script type="text/javascript">
//<![CDATA[
try{(function(){var w=self,l,p,o;if(w&&top){for(;w!==top&&(p=w.parent)&&p!==w&&(o=p.location)&&o.protocol===(l=w.location).protocol&&(o.host===l.host||(p.document&&p.document.domain===w.document.domain));w=p);if(w!==top)throw "";}({f:function(){document.documentElement?document.documentElement.style.display="":(!this.a&&(this.a=10),this.a<1E5&&(window.sfdcRetryShowWindow=this)&&setTimeout("sfdcRetryShowWindow.f()",this.a),this.a*=2)}}.f())})();}catch(e){if(top!==self)top.location=location;else throw e;}//]]></script></head>
    <html>
        <head>
<meta HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE" />
<meta HTTP-EQUIV="Expires" content="Mon, 01 Jan 1990 12:00:00 GMT" />

            <meta charset="utf-8" />
            <title>Child Care Check
            </title>
            <meta content="width=device-width, initial-scale=1" name="viewport" />


            <link rel="shortcut icon" />


            <link href="/resource/1499362237000/PSS_Assets/css/bootstrap.min.css" rel="stylesheet" />
            <link href="/resource/1499362237000/PSS_Assets/css/custom.css" rel="stylesheet" />
            <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
            <link href="https://s3.amazonaws.com/icomoon.io/114779/Socicon/style.css?cp0z2c" rel="stylesheet" />
            <link href="/resource/1499362237000/PSS_Assets/css/bootstrap-datepicker3.min.css" rel="stylesheet" />
            <style>
                h3 {
                    margin-top: 0;
                }
                .overlay {
                    z-index: 1051;
                    display: none;
                    width: 100%;
                    height: 100%;
                    position: fixed;
                    top: 0px;
                    left: 0px;
                    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
                    filter: alpha(opacity=50);
                    opacity: 0.5;
                    background-color: white;
                }
                .popup {
                    display: none;
                    z-index: 1052;
                    margin: auto;
                    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
                    filter: alpha(opacity=100);
                    opacity: 1.0;
                    background-color: white;
                    border: 1px solid #acacac;
                    box-shadow: 0 4px 16px rgba(0,0,0,0.2);
                    padding: 15px;
                    position: fixed;
                    top: 0;
                    left: 0;
                    bottom: 0;
                    right: 0;
                }
                #loadingPopup {
                    width: 300px;
                    height: 150px;
                    overflow: hidden;
                    vertical-align: middle;
                    text-align: center;
                }
            </style>
        </head>

        <body>
            <div class="print-wrapper">
                <div class="body-wrapper">
            <div id="printBody"></div>
                </div>
            </div>

            <div class="global-wrapper">
                    <div class="container header-wrapper">
                        <div class="row">
                            <div class="col-xs-12 col-sm-8">
                                <a class="logo navbar-btn pull-left" href="/" title="Home">
                                    <img alt="Home" class="img-responsive" src="/resource/1499362237000/PSS_Assets/img/DEL-logo.png" />
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-4">
                                <div id="google_translate_element"></div>
                                <script type="text/javascript">
                                    function googleTranslateElementInit() {
                                      new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
                                    }
                                </script>
                                <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" type="text/javascript"></script>
                                <p style="margin: 5px 0 0 0;">Need help? Not sure what to look for? Call the CCA of WA Family Center at 1-800-446-1114 for help from a child care specialist</p>
                                <p style="margin: 5px 0 0 0;">User Guides:&nbsp;<a href="/resource/1519253587000/ChildCareCheckUserGuideAll/ChildCareCheckUserGuideENG.pdf" target="_blank">English</a>
                                                                          &nbsp;<a href="/resource/1519253587000/ChildCareCheckUserGuideAll/ChildCareCheckUserGuideES.pdf" target="_blank">Espa&ntilde;ol</a>
                                                                          &nbsp;<a href="/resource/1519253587000/ChildCareCheckUserGuideAll/ChildCareCheckUserGuideSO.pdf" target="_blank">Soomaali</a>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="navbar-wrapper">

                                <div class="container">
                        <header class="navbar navbar-default" id="navbar" role="banner">
                            <div class="row">
                                    <div class="navbar-header">
                                        <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button">
                                            <span class="sr-only">Toggle navigation</span>
                                            <span class="icon-bar"></span>
                                            <span class="icon-bar"></span>
                                            <span class="icon-bar"></span>
                                        </button>
                                    </div>
                                    <div class="navbar-collapse collapse">
                                        <nav role="navigation">
                                            <ul class="menu nav navbar-nav">
                                                <li class="first collapsed active active">
                                                    <a class="active" href="https://del.wa.gov/">Home</a>
                                                </li>
                                                <li class="expanded dropdown">
                                                    <a class="dropdown-toggle" data-target="#" data-toggle="dropdown" href="https://del.wa.gov/parents-family">Parents-Family <span class="caret"></span>
                                                    </a>
                                                    <ul class="dropdown-menu">
                                                        <li class="first leaf">
                                                            <a href="https://del.wa.gov/parents-family/eceap-and-head-start">ECEAP and Head Start</a>
                                                        </li>
                                                        <li class="collapsed">
                                                            <a href="https://del.wa.gov/EarlyAchieversforFamilies">Early Achievers for Families</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/parents-family/family-friend-and-neighbor-care">Family, Friend and Neighbor Care</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/parents-family/getting-help-paying-child-care">Getting Help Paying for Child Care</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/parents-family/other-child-care-programs-and-choices">Other Child Care Programs and Choices</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/parents-family/parent-advisory-group">Parent Advisory Group</a>
                                                        </li>
                                                        <li class="last leaf">
                                                            <a href="https://del.wa.gov/parents-family/school-age-care">School Age Care</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li class="expanded dropdown">
                                                    <a class="dropdown-toggle" data-target="#" data-toggle="dropdown" href="https://del.wa.gov/providers-educators">Providers-Educators <span class="caret"></span>
                                                    </a>
                                                    <ul class="dropdown-menu">
                                                        <li class="first collapsed">
                                                            <a href="https://del.wa.gov/earlyachievers">Early Achievers</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/providers-educators/early-childhood-education-and-assistance-program-eceap">Early Childhood Education and Assistance Program (ECEAP)</a>
                                                        </li>
                                                        <li class="collapsed">
                                                            <a href="https://del.wa.gov/providers-educators/early-support-infants-and-toddlers-esit">Early Support for Infants and Toddlers (ESIT)</a>
                                                        </li>
                                                        <li class="collapsed">
                                                            <a href="https://del.wa.gov/providers-educators/information-providers">Information for Providers</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/providers-educators/laws-rules-and-performance-standards">Laws, Rules and Performance Standards</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/providers-educators/merit">MERIT</a>
                                                        </li>
                                                        <li class="collapsed">
                                                            <a href="https://del.wa.gov/providers-educators/publications-forms-and-research">Publications, Forms and Research</a>
                                                        </li>
                                                        <li class="last leaf">
                                                            <a href="https://del.wa.gov/providers-educators/information-providers/subsidy-information-providers">Subsidy Information for Providers</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li class="expanded dropdown">
                                                    <a class="dropdown-toggle" data-target="#" data-toggle="dropdown" href="https://del.wa.gov/helpful-resources">Helpful Resources <span class="caret"></span>
                                                    </a>
                                                    <ul class="dropdown-menu">
                                                        <li class="first leaf">
                                                            <a href="https://del.wa.gov/helpful-resources/child-development-health-and-safefy">Child Development, Health and Safety</a>
                                                        </li>
                                                        <li class="collapsed">
                                                            <a href="https://del.wa.gov/helpful-resources/health-and-nutrition">Health and Nutrition</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/homevisiting">Home Visiting</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/helpful-resources/infant-toddler-regional-systems-and-services">Infant-Toddler Regional Systems and Services</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/helpful-resources/kindegarten-readiness">Kindergarten Readiness</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/helpful-resources/medicaid-treatment-child-care-program" title="Medicaid Treatment Child Care Program">MTCC/ECLIPSE Program</a>
                                                        </li>
                                                        <li class="collapsed">
                                                            <a href="https://del.wa.gov/helpful-resources/other-resources">Other Resources</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/professional-development-1">Professional Development Culturally Responsive Guidelines</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/racial-equity-initiative">Racial Equity Initiative</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/helpful-resources/safety">Safety</a>
                                                        </li>
                                                        <li class="collapsed">
                                                            <a href="https://del.wa.gov/helpful-resources/strengthening-families-washington">Strengthening Families Washington</a>
                                                        </li>
                                                        <li class="last leaf">
                                                            <a href="https://del.wa.gov/helpful-resources/washington-state-early-learning-and-developmental-guidelines">Washington State Early Learning and Development Guidelines</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li class="last expanded dropdown">
                                                    <a class="dropdown-toggle" data-target="#" data-toggle="dropdown" href="https://del.wa.gov/about-us">About DEL <span class="caret"></span>
                                                    </a>
                                                    <ul class="dropdown-menu">
                                                        <li class="first leaf">
                                                            <a href="https://del.wa.gov/about-us/contact-us">Contact Us</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/about-us/faq">FAQ</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/about-us/leadership">Leadership</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/node/363/">DEL Procurement</a>
                                                        </li>
                                                        <li class="leaf">
                                                            <a href="https://del.wa.gov/about-us/partnerships">Early Learning Partnerships</a>
                                                        </li>
                                                        <li class="last leaf">
                                                            <a href="https://del.wa.gov/node/370/">Jobs at DEL</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                            </ul>
                                            <div class="region region-navigation">
                                                <section class="block block-block socialmenu-top clearfix" id="block-block-48">
                                                    <div class="social-buttons">
                                                        <a href="http://www.addthis.com/bookmark.php?v=250&amp;#38;username=wsdel">
                                                            <i class="fa fa-share-alt fa-icon"></i>
                                                        </a>
                                                        <a href="https://twitter.com/DEL_wa">
                                                            <i class="fa fa-twitter fa-icon"></i>
                                                        </a>
                                                        <a href="http://www.facebook.com/?ref=home#!/pages/Olympia-WA/Washington-State-Department-of-Early-Learning/366437744745">
                                                            <i class="fa fa-facebook fa-icon"></i>
                                                        </a>
                                                        <a href="https://www.youtube.com/user/DeptOfEarlyLearning">
                                                            <i class="fa fa-youtube  fa-icon"></i>
                                                        </a>
                                                        <a href="http://delconnect.blogspot.com/">
                                                            <span class="socicon socicon-blogger"></span>
                                                        </a>
                                                    </div>
                                                </section>
                                            </div>
                                        </nav>
                                    </div>
                                </div>
                        </header>
                                </div>
                    </div>

                <div class="container body-wrapper">
                    <div class="overlay" id="blurredOverlay"></div>
                    <div aria-hidden="true" class="popup" id="loadingPopup" role="alert">
                        <br /><br />
                        <img alt="Loading" src="/resource/1499362237000/PSS_Assets/img/loading.gif" style="vertical-align: middle;" />
                        <br />Please wait...
                    </div>
            <div aria-hidden="true" class="top-general-alert alert alert-danger" id="responseErrors" role="alert"></div>

            <div class="row">
                <div class="col-xs-12">
                    <h1 class="page-title">Child Care Check</h1>
                    <p>After making your filter selections below here, you can bookmark or copy the URL in the address bar of your browser to return to this list of Child Care Providers.</p>
                    <p>Family home child care programs are currently listed and mapped by city only. Please call the telephone number listed for each provider to learn more about them.</p>
                </div>
            </div>


            <div class="row">
                <div class="col-xs-12">


                    <div class="row">
                        <div class="col-xs-12">
                            <div class="form-group">

                                <div class="input-group">
                                    <input class="form-control" id="searchBy" onchange="onFilterChange()" placeholder="Provider Name, Provider ID, Phone, City, Zip Code" type="text" />
                                    <span class="input-group-btn">
                                        <button class="btn btn-primary" type="button"><i aria-hidden="true" class="fa fa-search"></i></button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="panel panel-default search-panel">
                        <div class="panel-body">
                            <div class="row">

                                <div class="filter-group col-xs-12 col-md-3" id="licenseFacilityTypes">
                                    <label>Facility Type(s)</label>
                                        <div class="checkbox">
                                            <label>
                                                <input onchange="onFilterChange()" type="checkbox" value="Child Care Center" />
                                                Child Care Center
                                            </label>
                                        </div>
                                        <div class="checkbox">
                                            <label>
                                                <input onchange="onFilterChange()" type="checkbox" value="Family Child Care Home" />
                                                Family Child Care Home
                                            </label>
                                        </div>
                                        <div class="checkbox">
                                            <label>
                                                <input onchange="onFilterChange()" type="checkbox" value="School-age Program" />
                                                School-age Program
                                            </label>
                                        </div>
                                </div>
                                    <div class="col-xs-12 col-sm-6 col-md-6">
                                        <div class="form-group">
                                            <label>Radial Search: Start Location</label>
                                            <input class="form-control" id="startLocation" onchange="onFilterChange()" type="text" />
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-6 col-md-3">
                                        <div class="form-group">
                                            <label>Radial Search: Distance (mi)</label>
                                            <input class="form-control" id="distance" onchange="onFilterChange()" onkeyup="onDistanceKeyUp()" type="text" />
                                        </div>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">

                <div class="col-xs-12 col-md-4 col-lg-3" style="padding-bottom: 15px;">
                    <h3 style="margin-bottom: -10px;">Advanced Filters</h3>
                    <hr />
                    <div class="filter-group" id="providerType">
                        <h4>Provider Type</h4>
                        <div class="checkbox">
                            <label>
                                <input checked="checked" onchange="onFilterChange()" type="checkbox" value="DEL Licensed" />DEL Licensed
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input onchange="onFilterChange()" type="checkbox" value="Unlicensed Facility" />Unlicensed Facility
                            </label>
                        </div>
                    </div>
                        <hr />
                        <div class="filter-group advanced-filter" data-display-type="String" data-field-name="Provider_Status_External__c" data-name="PSL-0030" data-operator="OR" id="asi_PSL-0030">
                            <h4>Provider Status</h4>
                                    <div class="checkbox">
                                        <label>
                                            <input onchange="onFilterChange()" type="checkbox" value="Open" />
                                            Open
                                        </label>
                                    </div>
                                    <div class="checkbox">
                                        <label>
                                            <input onchange="onFilterChange()" type="checkbox" value="Closed" />
                                            Closed
                                        </label>
                                    </div>
                        </div>
                        <hr />
                        <div class="filter-group advanced-filter" data-display-type="Picklist" data-field-name="Physical_County__c" data-name="PSL-0026" data-operator="AND" id="asi_PSL-0026">
                            <h4>County</h4>
                                <select class="form-control" onchange="onFilterChange()">
                                    <option>-- None selected --</option>
                                        <option value="Adams">Adams</option>
                                        <option value="Asotin">Asotin</option>
                                        <option value="Benton">Benton</option>
                                        <option value="Chelan">Chelan</option>
                                        <option value="Clallam">Clallam</option>
                                        <option value="Clark">Clark</option>
                                        <option value="Columbia">Columbia</option>
                                        <option value="Cowlitz">Cowlitz</option>
                                        <option value="Douglas">Douglas</option>
                                        <option value="Ferry">Ferry</option>
                                        <option value="Franklin">Franklin</option>
                                        <option value="Garfield">Garfield</option>
                                        <option value="Grant">Grant</option>
                                        <option value="Grays Harbor">Grays Harbor</option>
                                        <option value="Island">Island</option>
                                        <option value="Jefferson">Jefferson</option>
                                        <option value="King">King</option>
                                        <option value="Kitsap">Kitsap</option>
                                        <option value="Kittitas">Kittitas</option>
                                        <option value="Klickitat">Klickitat</option>
                                        <option value="Lewis">Lewis</option>
                                        <option value="Lincoln">Lincoln</option>
                                        <option value="Mason">Mason</option>
                                        <option value="Okanogan">Okanogan</option>
                                        <option value="Pacific">Pacific</option>
                                        <option value="Pend Oreille">Pend Oreille</option>
                                        <option value="Pierce">Pierce</option>
                                        <option value="San Juan">San Juan</option>
                                        <option value="Skagit">Skagit</option>
                                        <option value="Skamania">Skamania</option>
                                        <option value="Snohomish">Snohomish</option>
                                        <option value="Spokane">Spokane</option>
                                        <option value="Stevens">Stevens</option>
                                        <option value="Thurston">Thurston</option>
                                        <option value="Wahkiakum">Wahkiakum</option>
                                        <option value="Walla Walla">Walla Walla</option>
                                        <option value="Whatcom">Whatcom</option>
                                        <option value="Whitman">Whitman</option>
                                        <option value="Yakima">Yakima</option>
                                </select>
                        </div>
                        <hr />
                        <div class="filter-group advanced-filter" data-display-type="String" data-field-name="Early_Achiever_Status_Search__c" data-name="PSL-0027" data-operator="OR" id="asi_PSL-0027">
                            <h4>Early Achievers Status</h4>
                                    <div class="checkbox">
                                        <label>
                                            <input onchange="onFilterChange()" type="checkbox" value="Not Enrolled" />
                                            Not Enrolled
                                        </label>
                                    </div>
                                    <div class="checkbox">
                                        <label>
                                            <input onchange="onFilterChange()" type="checkbox" value="Participating Not Yet Rated" />
                                            Participating Not Yet Rated
                                        </label>
                                    </div>
                                    <div class="checkbox">
                                        <label>
                                            <input onchange="onFilterChange()" type="checkbox" value="Rated" />
                                            Rated
                                        </label>
                                    </div>
                        </div>


                </div>


                <div class="col-xs-12 col-md-8 col-lg-9">
                    <div class="row hidden" id="searchResultsHeader">
                        <div class="col-xs-6 col-md-4">
                            <h3 id="resultCount"></h3>
                        </div>
                        <div class="col-xs-6 col-md-4 text-center">
                            <ul class="list-unstyled list-inline icon-tablist" role="tablist">
                                <li class="active" id="resultsListLi" role="presentation">
                                    <a aria-controls="resultsList" data-toggle="tab" href="#resultsList" id="resultsListA" role="tab">
                                        <i aria-hidden="true" class="fa fa-th-list"></i>
                                    </a>
                                </li>
                                <li id="resultsMapLi" role="presentation">
                                    <a aria-controls="resultsMap" data-toggle="tab" href="#resultsMap" id="resultsMapA" role="tab">
                                        <i aria-hidden="true" class="fa fa-map"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-xs-6 col-md-4">
                            <div class="dropdown pull-right" style="position: relative; top: -8px;">
                                <button aria-expanded="true" aria-haspopup="true" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" id="dropdownMenu1" type="button">
                                    My List (<span id="myListCount">0</span>)
                                    <span class="caret"></span>
                                </button>
                                <ul aria-labelledby="dropdownMenu1" class="dropdown-menu">
                                    <li><a href="#" onclick="printMyList()"><i aria-hidden="true" class="fa fa-print"></i>&nbsp;Print My List</a></li>
                                    <li class="divider" role="separator"></li>

                                    <li><a href="#" onclick="clearMyList()"><i aria-hidden="true" class="fa fa-trash"></i>&nbsp;Clear My List</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="tab-content hidden" id="searchResults">

                        <div class="tab-pane active" id="resultsList" role="tabpanel">

                        </div>


                        <div class="tab-pane" id="resultsMap" role="tabpanel">

                        </div>
                    </div>
                    <div id="loader" style="text-align: center;">
                        <img src="/resource/1499362237000/PSS_Assets/img/loading.gif" />
                        Loading...
                    </div>
                </div>
            </div>
                </div>
                    <div class="footer-wrapper">
                        <footer class="footer">
                            <div class="container">
                                <div class="row">
                                    <div class="col-sm-4 col-xs-12 footer_lh">
                                        <div class="region region-footer-lh">
                                            <section class="block block-block clearfix" id="block-block-44">
                                                <div id="comms-footer">
                                                    <p>
                                                        <i class="fa fa-envelope"></i>
                                                        <a href="mailto:communications@del.wa.gov"> Email DEL</a> or <i class="fa fa-phone"></i> Call toll free 1.866.482.4325
                                                    </p>
                                                </div>
                                            </section>
                                            <section class="block block-block clearfix" id="block-block-45">
                                                <p>
                                                    <a href="http://preventchildabuse.org/" id="prevent-child-abuse">
                                                        <img src="/resource/1499362237000/PSS_Assets/img/PreventChildAbuse.png" />
                                                    </a>
                                                </p>
                                            </section>
                                        </div>
                                    </div>
                                    <div class="col-sm-8 col-xs-12 footer_rh">
                                        <div class="region region-footer-rh">
                                            <section class="block block-block clearfix" id="block-block-46">
                                                <div id="footer-nav">
                                                    <a href="https://del.wa.gov/about-us">About DEL</a> *
                                                    <a href="https://del.wa.gov/about-us/contact-us"> Contacts</a> *
                                                    <a href="https://del.wa.gov/about-us/faq"> FAQ</a> *
                                                    <a href="https://del.wa.gov/privacy-policy"> Privacy Policy</a> *
                                                    <a href="https://del.wa.gov/jobs-del">Jobs at DEL</a> *
                                                    <a href="https://del.wa.gov/del-procurements">DEL Procurements</a>
                                                </div>
                                            </section>
                                            <section class="block block-block clearfix" id="block-block-43">
                                                <div class="social-buttons">
                                                    <a href="http://www.addthis.com/bookmark.php?v=250&amp;#38;username=wsdel">
                                                        <i class="fa fa-share-alt fa-icon"></i>
                                                    </a>
                                                    <a href="https://twitter.com/DEL_wa">
                                                        <i class="fa fa-twitter fa-icon"></i>
                                                    </a>
                                                    <a href="http://www.facebook.com/?ref=home#!/pages/Olympia-WA/Washington-State-Department-of-Early-Learning/366437744745">
                                                        <i class="fa fa-facebook fa-icon"></i>
                                                    </a>
                                                    <a href="https://www.youtube.com/user/DeptOfEarlyLearning">
                                                        <i class="fa fa-youtube fa-icon"></i>
                                                    </a>
                                                    <a href="http://delconnect.blogspot.com/">
                                                        <span class="socicon socicon-blogger"></span>
                                                    </a>
                                                </div>
                                            </section>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-xs-12 footer_floor">
                                        <div class="region region-footer-floor">
                                            <section class="block block-block clearfix" id="block-block-47">
                                                <div class="col-sm-6 col-sm-offset-3 col-xs-12">
                                                    <p id="copyright">Copyright &copy;2016 State of Washington Department of Early Learning</p>
                                                </div>
                                                <div class="col-sm-3 col-xs-12">
                                                    <a href="http://access.wa.gov/" id="access-wa" target="_self">
                                                        <img src="/resource/1499362237000/PSS_Assets/img/AccessWashington.png" style="width: 145px; height: 30px;" />
                                                    </a>
                                                </div>
                                                <div class="clearfix" id="footer-clear-reset"></div>
                                            </section>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </footer>
                    </div>
            </div>



            <script src="/resource/1499362237000/PSS_Assets/js/jquery-2.2.4.min.js"></script>
            <script src="/resource/1499362237000/PSS_Assets/js/bootstrap.min.js"></script>
            <script src="/resource/1499362237000/PSS_Assets/js/bootstrap-datepicker.min.js"></script>
            <script src="/resource/1499362237000/PSS_Assets/js/js.cookie.js"></script>
            <script src="/resource/1499362237000/PSS_Assets/js/moment.min.js"></script>
            <script src="/resource/1499362237000/PSS_Assets/js/ScrollMagic.min.js"></script>

            <script type="text/javascript">
                var pendingRemoteCalls = 0;

                function showPleaseWait(show) {
                    pendingRemoteCalls += (show ? 1 : !pendingRemoteCalls ? 0 : -1);
                    $('#blurredOverlay').css('display', pendingRemoteCalls ? 'initial' : 'none');
                    $('#loadingPopup').css('display', pendingRemoteCalls ? 'initial' : 'none');
                }

                var stateString = 'SearchPageState';
                var cookieString = 'PSS_Search_MyList';

                var providerLimit = 10;
                var providerStart = 0;
                var allIds = [];
                var allProviders = [];

                var hasApiKey = true;
                var staticGoogleMaps = false;

                var initialLoadDone = false;
                var googleReady = !hasApiKey;
                var urlUpdated = false;

                var queryingProviders = false;
                var myList = null;
                var currentProviderBatch = [];
                var smallMaps = [];
                var largeMap = null;

                var advancedFilterNames = $('.advanced-filter').get().map(function(e) { return e.dataset.name; });

                function isListView() {
                    return $('#resultsListLi').hasClass('active');
                }

                function genAOSList(areas) {
                    var col = areas.split(';');
                    var out='';
                    if (col.length > 1) {
                        var out = '<b>Early Achievers Areas of Specialization:</b><br /><ul style="list-style: none;">';
                        for(i=0; i < col.length; i++){
                            out = out + '<li>' + col[i] + '</li>';
                        }
                        out = out + '</ul>'
                    }
                    return out;
                }

                var smController = new ScrollMagic.Controller();
                var smScene = new ScrollMagic.Scene({triggerElement: "footer", triggerHook: "onEnter"})
                    .addTo(smController)
                    .on("enter", function (e) {
                        if (!queryingProviders && isListView()) {
                            queryMoreProviders();
                        }
                    });

                function addPageError(html) {
                    document.getElementById('responseErrors').innerHTML =
                        '<button type="button" class="close" aria-label="Close" onclick="document.getElementById(\'responseErrors\').innerHTML = \'\';">' +
                            '<span aria-hidden="true">&#215;</span>' +
                        '</button>' + html;
                }

                function remotingErrorHandler(event) {
                    if (event.status) {
                        return true;
                    } else if (event.type === 'exception') {
                        addPageError('Exception: ' + event.message + '<br/>\nMethod: ' + event.method + '<br/>\nStack trace: ' + event.where);
                    } else {
                        addPageError('Error (type ' + (event.type || 'none') + '): ' + event.message);
                    }
                    return false;
                }

                function getFacilityTypes() {
                    return $('#licenseFacilityTypes input[type="checkbox"]:checked').get().map(function(e) { return e.value; }).join(';');
                }

                // function getDaysOfOperation() {
                //     return $('#daysOfOperation input[type="checkbox"]:checked').get().map(function(e) { return e.value; }).join(';');
                // }

                // function getSchedules() {
                //     return $('#schedules input[type="checkbox"]:checked').get().map(function(e) { return e.value; }).join(';');
                // }

                // function getPaymentTypes() {
                //     return $('#paymentTypes input[type="checkbox"]:checked').get().map(function(e) { return e.value; }).join(';');
                // }

                function getProviderTypes() {
                    return $('#providerType input[type="checkbox"]:checked').get().map(function(e) { return e.value; }).join(';');
                }

                function stripNonDigits(s) {
                    return s.replace(/[^\d]/g, '');
                }

                function onDistanceKeyUp() {
                    var d = $('#distance').val();
                    if (/[^\d]/.test(d)) {
                        $('#distance').val(stripNonDigits(d));
                    }
                }

                function startEndTime(a, d) {
                    // return '<div class="hoursOfOperationLabel">' + d + '&#160;</div>' +
                    //        (!!a['Start_Time_' + d + '__c'] && !!a['End_Time_' + d + '__c'] ?
                    //         a['Start_Time_' + d + '__c'] + ' - ' + a['End_Time_' + d + '__c'] :
                    //         //'<em>Closed</em>');
                    //        '');
                    return '<div class="hoursOfOperationLabel">' + d + '&#160;</div>' + (a['Hours_of_Operation_' + d + '__c'] || '');
                }

                function updateMyListCookie() {
                    Cookies.set(cookieString, myList);
                }

                function updateMyListCount() {
                    $('#myListCount').html(myList.length);
                }

                function addToMyList(aId, mapView) {
                    if (myList.indexOf(aId) == -1) {
                        myList.push(aId);
                    }
                    updateMyListCookie();
                    updateMyListCount();
                    $('#mlbc' + (mapView ? '' : '_' + aId)).html(removeFromMyListButton(aId, mapView));
                }

                function removeFromMyList(aId, mapView) {
                    var i = myList.indexOf(aId);
                    if (i != -1) {
                        myList.splice(i, 1);
                    }
                    updateMyListCookie();
                    updateMyListCount();
                    $('#mlbc' + (mapView ? '' : '_' + aId)).html(addToMyListButton(aId, mapView));
                }

                function addToMyListButton(aId, mapView) {
                    return '<button class="btn btn-success" onclick="addToMyList(\'' + aId + '\', ' + mapView + ')">' +
                               '<i class="fa fa-plus" aria-hidden="true"></i>&#160; Add to My List' +
                           '</button>';
                }

                function removeFromMyListButton(aId, mapView) {
                    return '<button class="btn btn-danger" onclick="removeFromMyList(\'' + aId + '\', ' + mapView + ')">' +
                               '<i class="fa fa-trash" aria-hidden="true"></i>&#160; Remove from My List' +
                           '</button>'
                }

                function semicolonsToCommas(s) {
                    return s ? s.replace(/;$/, '').replace(/;/g, ', ') : '';
                }

                function afterQueryDone() {
                    $('#searchResultsHeader').removeClass('hidden');
                    $('#searchResults').removeClass('hidden');

                    //smScene.update();
                    queryingProviders = false;
                    $("#loader").addClass("hidden");
                }

                function addToResultsMap(providers) {
                    providers.forEach(function(a) {
                        if (a.Display_on_Map_View__c && a.Physical_Geolocation__Latitude__s && a.Physical_Geolocation__Longitude__s) {
                            var marker = new google.maps.Marker({
                                map: largeMap,
                                position: {lat: a.Physical_Geolocation__Latitude__s, lng: a.Physical_Geolocation__Longitude__s},
                                title: a.Account_Name_Display_Label__c
                            });

                            (function(a) {
                                marker.addListener('click', function() {
                                    largeMapProviderInfo(a);
                                });
                            })(a);
                        }
                    });

                    afterQueryDone();
                }

                function redrawMap(map) {
                    var z = map.getZoom();
                    var c = map.getCenter();
                    google.maps.event.trigger(map, 'resize');
                    map.setZoom(z);
                    map.setCenter(c);
                }

                function largeMapProviderInfo(a) {
                    $('#map_large_details').html(
                        '<div class="panel pane-default result-panel">' +
                            '<div class="panel-heading">' +
                                '<div class="row">' +
                                    '<div class="col-xs-12 col-md-8">' +
                                        '<h1>' + (a.Account_Name_Display_Label__c || '') + '</h1>' +
                                    '</div>' +
                                    '<div class="col-xs-12 col-md-4 text-right">' +
                                        '<img class="earlyAchieversLogo" src="/resource/1499362238000/PSS_Early_Achievers_Logo"></img>' +
                                        '<i class="fa fa-info-circle" aria-hidden="true" data-original-title="<p>Early Achievers is Washington&#39;s voluntary quality rating and improvement system.</p>"></i>&#160;<a href="https://del.wa.gov/earlyachievers">Early Achievers</a>' +
                                        '<p>' + (a.Early_Achiever_Status_External__c || '') + '</p>' +
                                        genAOSList(a.Early_Achievers_Areas_Of_Specialization__c || '') +
                                    '</div>' +
                                '</div>' +
                                '<div class="row">' +
                                    '<div class="col-xs-12">' +
                                        '<p>' + (a.Provider_Location_Label__c || '') + '</p>' +
                                        '<p>' + (a.PS_Provider_ContactUs_Label__c || '') + '</p>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +
                            '<div class="panel-body">' +
                                '<div class="row">' +
                                    '<div class="col-xs-4">' +
                                        '<div class="form-group">' +
                                            '<label>Hours of Operation</label>' +
                                            '<ul class="list-unstyled">' +
                                                '<li>' + startEndTime(a, 'Sun') + '</li>' +
                                                '<li>' + startEndTime(a, 'Mon') + '</li>' +
                                                '<li>' + startEndTime(a, 'Tue') + '</li>' +
                                                '<li>' + startEndTime(a, 'Wed') + '</li>' +
                                                '<li>' + startEndTime(a, 'Thu') + '</li>' +
                                                '<li>' + startEndTime(a, 'Fri') + '</li>' +
                                                '<li>' + startEndTime(a, 'Sat') + '</li>' +
                                            '</ul>' +
                                        '</div>' +
                                    '</div>' +
                                    '<div class="col-xs-4">' +
                                        '<div class="form-group">' +
                                            '<label>Facility Type</label>' +
                                            '<p>' + (a.Latest_License_Facility_Type_Name__c || '') + '</p>' +
                                        '</div>' +
                                        '<div class="form-group">' +
                                            '<label>Age Groups Served</label>' +
                                            '<p>' + semicolonsToCommas(a.Latest_License_Age_Group_Served__c) + '</p>' +
                                        '</div>' +
                                    '</div>' +
                                    '<div class="col-xs-4">' +
                                        '<div class="form-group">' +
                                            '<label>Language(s) Spoken</label>' +
                                            '<p>' + (a.Languages_of_Instruction__c || '') + '</p>' +
                                        '</div>' +
                                        '<div class="form-group">' +
                                            (a.Is_Funded_HS__c == 'Yes' ?
                                                '<label>Head Start</label>&#160;<i class="fa fa-info-circle" aria-hidden="true" data-original-title="<p>Indicates the Provider currently offers Head Start slots.</p>"></i>' : '') +
                                            (a.Is_Funded_EHS__c == 'Yes' ?
                                                '<label>Early Head Start</label>&#160;<i class="fa fa-info-circle" aria-hidden="true" data-original-title="<p>Indicates the Provider currently offers Early Head Start slots.</p>"></i>' : '') +
                                            (a.Is_Funded_ECEAP__c == 'Yes' ?
                                                '<label>ECEAP Provider</label>&#160;<i class="fa fa-info-circle" aria-hidden="true" data-original-title="<p>Indicates the Provider currently offers ECEAP slots.</p>"></i>' : '') +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +
                            '<div class="panel-footer">' +
                                '<div class="row">' +
                                    '<div class="col-xs-6">' +
                                        '<a href="/PSS_Provider?id=' + a.Id + '" target="_blank" class="btn btn-primary">View Details</a>' +
                                    '</div>' +
                                    '<div id="mlbc" class="col-xs-6 text-right">' +
                                        (myList.indexOf(a.Id) == -1 ? addToMyListButton(a.Id, true) : removeFromMyListButton(a.Id, true)) +
                                    '</div>' +
                                '</div>' +
                            '</div>' +
                        '</div>'
                    );

                    $('.fa.fa-info-circle').tooltip({'html': true});
                    document.getElementById('map_large_details').scrollIntoView();
                }

                function buildMap(a, location, viewport, callback) {
                    var e = document.getElementById('map_' + a.Id);

                    var zoom = 6;
                    var center = {lat: 47.506571, lng: -121.006366};

                    if (location) {
                        zoom = a.Physical_Street_Display_Label__c ? 16 : 10;
                        center = location;
                    }

                    var map = new google.maps.Map(e, {
                        zoom: zoom,
                        center: center
                    });
                    smallMaps.push(map);

                    if (viewport) {
                        map.fitBounds(viewport);
                    }

                    if (location && a.Display_on_Map_View__c) {
                        var marker = new google.maps.Marker({
                            map: map,
                            position: location
                        });
                    }

                    $(e).removeClass('spinner');
                    window.setTimeout(function() {
                        redrawMap(map);
                        if (!location && !viewport) {
                            $(e).before('<em class="address-not-found">Address not found.</em>');
                        }
                    }, 1000);

                    if (callback) callback();
                }

                function stripBr(s) {
                    return s ? s.replace('<br>', ' ') : '';
                }

                function geocodeAddress(a, callback) {
                    var geocoder = new google.maps.Geocoder();
                    geocoder.geocode(
                        { 'address': stripBr(a.Provider_Location_Label__c) },
                        function(results, status) {
                            if (status === 'OK') {
                                var geometry = results[0].geometry;
                                a.Physical_Geolocation__Latitude__s = geometry.location.lat();
                                a.Physical_Geolocation__Longitude__s = geometry.location.lng();
                                buildMap(a, geometry.location, geometry.viewport, callback);
                            } else if (status === 'OVER_QUERY_LIMIT') {
                                window.setTimeout(function() { geocodeAddress(a, callback); }, 1000);
                            } else {
                                if (status !== 'ZERO_RESULTS') {
                                    console.log('Geocode was not successful for the following reason: ',status,'record',a);
                                    if (callback) callback();
                                } else {
                                    buildMap(a, null, null, callback);
                                }
                            }
                        }
                    );
                }

                function buildMaps(providers) {
                    if (!providers || !providers.length) {
                        addToResultsMap(currentProviderBatch);
                        return;
                    }

                    var a = providers[0];

                    if (a.Physical_Geolocation__Latitude__s && a.Physical_Geolocation__Longitude__s) {
                        buildMap(a, { lat: a.Physical_Geolocation__Latitude__s, lng: a.Physical_Geolocation__Longitude__s }, null, function() {
                            buildMaps(providers.slice(1));
                        });
                    } else {
                        geocodeAddress(a, function() {
                            buildMaps(providers.slice(1));
                        });
                    }
                }

                function listViewProviderCard(a, forPrinting) {
                    var center = a.Physical_Geolocation__Latitude__s && a.Physical_Geolocation__Longitude__s
                                    ? a.Physical_Geolocation__Latitude__s + ',' + a.Physical_Geolocation__Longitude__s
                                    : a.Provider_Location_Label__c;
                    var zoom = a.Physical_Street_Display_Label__c ? 16 : 10;

                    return  '<div class="panel pane-default result-panel">' +
                                '<div class="panel-heading">' +
                                    '<div class="row">' +
                                        '<div class="col-xs-12 col-sm-7">' +
                                            '<a href="/PSS_Provider?id=' + a.Id + '" target="_blank" style="color:#000;">' +
                                            '<h1>' + (a.Account_Name_Display_Label__c || '') + '</h1></a>' +
                                        '</div>' +
                                        '<div class="col-xs-12 col-sm-5 text-right">' +
                                            '<img class="earlyAchieversLogo" src="/resource/1499362238000/PSS_Early_Achievers_Logo"></img>' +
                                            '<i class="fa fa-info-circle" aria-hidden="true" data-original-title="<p>Early Achievers is Washington&#39;s voluntary quality rating and improvement system.</p>"></i>&#160;' + (forPrinting ? 'Early Achievers' : '<a href="https://del.wa.gov/earlyachievers">Early Achievers</a>') +
                                            '<p>' + (a.Early_Achiever_Status_External__c || '') + '</p>' +
                                            genAOSList(a.Early_Achievers_Areas_Of_Specialization__c || '') +
                                        '</div>' +
                                    '</div>' +
                                    '<div class="row">' +
                                        '<div class="col-xs-12">' +
                                            '<p>' + (a.Provider_Location_Label__c || '') + '</p>' +
                                            '<p>' + (a.PS_Provider_ContactUs_Label__c || '') + '</p>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +
                                '<div class="panel-body">' +
                                    '<div class="row">' +
                                        '<div class="col-xs-12 col-md-6">' +
                                            '<div class="row">' +
                                                '<div class="col-xs-6">' +
                                                    '<div class="form-group">' +
                                                        '<label>Hours of Operation</label>' +
                                                        '<ul class="list-unstyled">' +
                                                            '<li>' + startEndTime(a, 'Sun') + '</li>' +
                                                            '<li>' + startEndTime(a, 'Mon') + '</li>' +
                                                            '<li>' + startEndTime(a, 'Tue') + '</li>' +
                                                            '<li>' + startEndTime(a, 'Wed') + '</li>' +
                                                            '<li>' + startEndTime(a, 'Thu') + '</li>' +
                                                            '<li>' + startEndTime(a, 'Fri') + '</li>' +
                                                            '<li>' + startEndTime(a, 'Sat') + '</li>' +
                                                        '</ul>' +
                                                    '</div>' +
                                                    (a.Is_Funded_HS__c == 'Yes' ?
                                                        '<label>Head Start</label>&#160;<i class="fa fa-info-circle" aria-hidden="true" data-original-title="<p>Indicates the Provider currently offers Head Start slots.</p>"></i>' : '') +
                                                    (a.Is_Funded_EHS__c == 'Yes' ?
                                                        '<label>Early Head Start</label>&#160;<i class="fa fa-info-circle" aria-hidden="true" data-original-title="<p>Indicates the Provider currently offers Early Head Start slots.</p>"></i>' : '') +
                                                    (a.Is_Funded_ECEAP__c == 'Yes' ?
                                                        '<label>ECEAP Provider</label>&#160;<i class="fa fa-info-circle" aria-hidden="true" data-original-title="<p>Indicates the Provider currently offers ECEAP slots.</p>"></i>' : '') +
                                                '</div>' +
                                                '<div class="col-xs-6">' +
                                                    '<div class="form-group">' +
                                                        '<label>Provider Status</label>' +
                                                        '<p>' + (a.Provider_Status__c || '') + '</p>' +
                                                    '</div>' +
                                                    '<div class="form-group">' +
                                                        '<label>Facility Type</label>' +
                                                        '<p>' + (a.Latest_License_Facility_Type_Name__c || '') + '</p>' +
                                                    '</div>' +
                                                    '<div class="form-group">' +
                                                        '<label>Age Groups Served</label>' +
                                                        '<p>' + semicolonsToCommas(a.Latest_License_Age_Group_Served__c) + '</p>' +
                                                    '</div>' +
                                                    '<div class="form-group">' +
                                                        '<label>Language(s) Spoken</label>' +
                                                        '<p>' + (a.Languages_of_Instruction__c || '') + '</p>' +
                                                    '</div>' +
                                                '</div>' +
                                            '</div>' +
                                        '</div>' +
                                        '<div class="col-xs-12 col-md-6">' +
                                            (forPrinting
                                                ? '<div class="mapContainer">' +
                                                      '<img src="https://maps.googleapis.com/maps/api/staticmap?center=' + center + '&zoom=' + zoom +
                                                      '&size=400x200&maptype=roadmap' + (a.Display_on_Map_View__c ? '&markers=color:red%7C' + center : '') +
                                                      '&key=AIzaSyD28nBYKwqn2zaKcZkj8OgmUwE5df3SEo4" />' +
                                                  '</div>'
                                                : (staticGoogleMaps
                                                      ? '<div class="mapContainer">' +
                                                            '<img src="https://maps.googleapis.com/maps/api/staticmap?center=' + center + '&zoom=' + zoom +
                                                            '&size=400x200&maptype=roadmap' + (a.Display_on_Map_View__c ? '&markers=color:red%7C' + center : '') +
                                                            '&key=AIzaSyD28nBYKwqn2zaKcZkj8OgmUwE5df3SEo4" />' +
                                                        '</div>'
                                                      : '<div class="mapContainer ' + (hasApiKey ? 'spinner' : '') + '" id="map_' + a.Id + '">' +
                                                            (hasApiKey
                                                                ? ''
                                                                : '<div class="placeholderWrapper">' +
                                                                      '<div class="placeholder">' +
                                                                          '<em class="placeholderText">Google Maps coming soon!</em>' +
                                                                      '</div>' +
                                                                  '</div>'
                                                            ) +
                                                        '</div>'
                                                  )
                                            ) +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +
                                (forPrinting
                                    ? ''
                                    : '<div class="panel-footer">' +
                                          '<div class="row">' +
                                              '<div class="col-xs-6">' +
                                                  '<a href="/PSS_Provider?id=' + a.Id + '" target="_blank" class="btn btn-primary">View Details</a>' +
                                              '</div>' +
                                              '<div id="mlbc_' + a.Id + '" class="col-xs-6 text-right">' +
                                                  (myList.indexOf(a.Id) == -1 ? addToMyListButton(a.Id) : removeFromMyListButton(a.Id)) +
                                              '</div>' +
                                          '</div>' +
                                      '</div>'
                                ) +
                            '</div>';
                }

                function queryMyListProvidersCallback(providers, event) {
                    if (!remotingErrorHandler(event)) return;

                    $('#printBody').html(providers.map(function(a) {
                        return listViewProviderCard(a, true);
                    }).join(''));

                    window.setTimeout(function() {
                        showPleaseWait(false);
                        window.print();
                    }, 1000);
                }

                function printMyList() {
                    if (!myList.length) {
                        alert('Your list is empty');
                        return;
                    }

                    showPleaseWait(true);
                    Visualforce.remoting.Manager.invokeAction(
                        'PSS_SearchController.queryProviders',
                        myList,
                        queryMyListProvidersCallback,
                        {escape: false}
                    );
                }

                function clearMyList() {
                    while (myList.length) {
                        removeFromMyList(myList[0]);
                    }
                }

                function addToResultsList(providers) {
                    $('#resultsList').append(providers.map(function(a) {
                        return listViewProviderCard(a);
                    }).join(''));

                    $('.fa.fa-info-circle').tooltip({'html': true});

                    if (hasApiKey && !staticGoogleMaps) {
                        buildMaps(providers);
                    } else {
                        afterQueryDone();
                    }
                }

                function queryMoreProvidersCallback(providers, event) {
                    if (!remotingErrorHandler(event)) return;

                    currentProviderBatch = providers;
                    allProviders = allProviders.concat(providers);
                    providerStart += providers.length;

                    addToResultsList(providers)
                }

                function queryMoreProviders() {
                    if (providerStart >= allIds.length) return;

                    queryingProviders = true;
                    $("#loader").removeClass("hidden");

                    var idList = allIds.slice(providerStart, providerStart + providerLimit);
                    Visualforce.remoting.Manager.invokeAction(
                        'PSS_SearchController.queryProviders',
                        idList,
                        queryMoreProvidersCallback,
                        {escape: false}
                    );
                }

                function requeryProvidersCallback(result, event) {
                    if (!remotingErrorHandler(event)) return;

                    allProviders = [];
                    allIds = result;

                    $('#resultCount').html(!allIds.length ? 'No results found' : allIds.length + '&#160;result' + (allIds.length == 1 ? '' : 's'));
                    $('#resultsList').html('');
                    $('#resultsMap').html(
                        '<div class="mapContainer large spinner" id="map_large">' +
                            (hasApiKey
                                ? ''
                                : '<div class="placeholderWrapper">' +
                                      '<div class="placeholder">' +
                                          '<em class="placeholderText">A Google Map view with pin locations is coming soon!</em>' +
                                      '</div>' +
                                  '</div>'
                            ) +
                        '</div>' +
                        '<div id="map_large_details"></div>'
                    );

                    smallMaps = [];
                    var e = document.getElementById('map_large');
                    if (hasApiKey) {
                        largeMap = new google.maps.Map(e, {
                            zoom: 7,
                            center: {lat: 47.506571, lng: -121.006366}
                        });
                    }
                    $(e).removeClass('spinner');

                    if (allIds.length) {
                        queryMoreProviders();
                    } else {
                        afterQueryDone();
                    }
                }

                function isRadialSearch() {
                    //return $('#searchType').val() == 1;
                    return true;
                }

                function requeryProviders(location/*, location2*/) {
                    $('#searchResultsHeader').addClass('hidden');
                    $('#searchResults').addClass('hidden');

                    var radialSearch = isRadialSearch();
                    var startLocation = $('#startLocation').val();
                    //var endLocation = $('#endLocation').val();

                    if (startLocation && !location && hasApiKey) {
                        var geocoder = new google.maps.Geocoder();
                        geocoder.geocode(
                            { 'address': startLocation },
                            function(results, status) {
                                if (status === 'OK') {
                                    requeryProviders(results[0].geometry.location);
                                }
                            }
                        );
                        return;
                    }

                    /*if (!radialSearch && endLocation && !location2) {
                        var geocoder = new google.maps.Geocoder();
                        geocoder.geocode(
                            { 'address': endLocation },
                            function(results, status) {
                                if (status === 'OK') {
                                    requeryProviders(location, results[0].geometry.location);
                                }
                            }
                        );
                        return;
                    }*/

                    var searchBy = $('#searchBy').val().replace(/'/g, "\\'") || '';

                    // var youngestMonths = null;
                    // var youngestBirthdate = $('#youngestBirthdate').val();
                    // if (youngestBirthdate) {
                    //     var youngestMonths = moment().diff(moment(youngestBirthdate, 'MM/DD/YYYY'), 'months');
                    // }

                    // var oldestMonths = null;
                    // var oldestBirthdate = $('#oldestBirthdate').val();
                    // if (oldestBirthdate) {
                    //     var oldestMonths = moment().diff(moment(oldestBirthdate, 'MM/DD/YYYY'), 'months');
                    // }

                    var facilityTypes = getFacilityTypes();
                    if (facilityTypes) {
                        facilityTypes = facilityTypes.split(';').map(function(e) { return "'" + e + "'"; }).join(',');
                    }

                    var providerTypes = getProviderTypes().split(';');

                    var distance = $('#distance').val();
                    var geoLatitude = null;
                    var geoLongitude = null;
                    /*var geoLatitude2 = null;
                    var geoLongitude2 = null;*/

                    if (location && distance/* && (radialSearch || location2)*/) {
                        geoLatitude = location.lat();
                        geoLongitude = location.lng();
                        /*if (!radialSearch) {
                            geoLatitude2 = location2.lat();
                            geoLongitude2 = location2.lng();
                        }*/
                    } else {
                        distance = null;
                    }

                    // var schedules = getSchedules();
                    // if (schedules) {
                    //     schedules = schedules.split(';').map(function(e) { return "'" + e + "'"; }).join(',');
                    // }

                    // var paymentTypes = getPaymentTypes();
                    // if (paymentTypes) {
                    //     paymentTypes = paymentTypes.split(';').map(function(e) { return "'" + e + "'"; }).join(',');
                    // }

                    var additionalClauses = [];
                    $('.advanced-filter').each(function() {
                        var d = this.dataset;
                        if (d.displayType === 'Picklist') {
                            var picklistValue = $(this).find('select option:selected').attr('value');
                            if (picklistValue) {
                                additionalClauses.push('(' + d.fieldName + '=\'' + picklistValue + '\')');
                            }
                        }
                        if (d.displayType === 'MultiPicklist' || d.displayType === 'String') {
                            var checkedItems = $(this).find('input[type="checkbox"]:checked').get();
                            if (checkedItems.length) {
                                additionalClauses.push('(' + checkedItems.map(function(e) { return d.fieldName + '=\'' + e.value + '\''; }).join(' ' + d.operator + ' ') + ')');
                            }
                        }
                    });

                    Visualforce.remoting.Manager.invokeAction(
                        'PSS_SearchController.getKeys',
                        searchBy, facilityTypes, providerTypes, //youngestMonths, oldestMonths,
                        geoLatitude, geoLongitude,// geoLatitude2, geoLongitude2,
                        distance, //schedules, paymentTypes,
                        additionalClauses,
                        requeryProvidersCallback,
                        {escape: false}
                    );
                }

                function checkEverythingReady() {
                    if (urlUpdated && googleReady) {
                        requeryProviders();
                    }
                }

                function updateURL() {
                    // based on all filters in page, update URL
                    var o = {
                        'q' : $('#searchBy').val(),
                        // 'yb': $('#youngestBirthdate').val(),
                        // 'ob': $('#oldestBirthdate').val(),
                        //'st': $('#searchType').val(),
                        'd' : $('#distance').val(),
                        'sl': $('#startLocation').val(),
                        //'el': $('#endLocation').val(),
                        'ft': getFacilityTypes(),
                        // 'ts': $('#timeStart').val(),
                        // 'te': $('#timeEnd').val(),
                        // 'do': getDaysOfOperation(),
                        // 's' : getSchedules(),
                        // 'p' : getPaymentTypes()
                        'p' : getProviderTypes()
                    };

                    $('.advanced-filter').each(function() {
                        if (this.dataset.displayType === 'Picklist') {
                            o[this.dataset.name] = $(this).find('select option:selected').attr('value');
                        }
                        if (this.dataset.displayType === 'MultiPicklist' || this.dataset.displayType === 'String') {
                            o[this.dataset.name] = $(this).find('input[type="checkbox"]:checked').get().map(function(e) { return e.value; }).join(';');
                        }
                    });

                    var newURL = 'PSS_Search?' + Object.keys(o).filter(function(k) { return o[k]; }).map(function(k) { return k + '=' + o[k]; }).join('&');

                    history.replaceState(stateString, '', newURL);
                }

                function onFilterChange() {
                    if (!initialLoadDone) return;

                    //$('#endBlock').toggleClass('hidden', isRadialSearch());
                    updateURL();

                    providerStart = 0;
                    allIds = [];
                    urlUpdated = true;

                    checkEverythingReady();
                }

                function updateFilters(pairs) {
                    // based on searchBy and optionalCriteria, set all filters in page
                    pairs.split('&').forEach(function(p) {
                        var a = p.split('=');
                        if (a.length != 2) return;

                        var k = decodeURIComponent(a[0]);
                        var v = decodeURIComponent(a[1]);

                        if (k == 'q') $('#searchBy').val(v);
                        if (k == 'c') updateFilters(v);
                        // if (k == 'yb') $('#youngestBirthdate').val(v);
                        // if (k == 'ob') $('#oldestBirthdate').val(v);
                        //if (k == 'st') $('#searchType').val(v);
                        if (k == 'd') $('#distance').val(stripNonDigits(v));
                        if (k == 'sl') $('#startLocation').val(v);
                        //if (k == 'el') $('#endLocation').val(v);
                        if (k == 'ft') {
                            v.split(';').forEach(function(e) {
                                $('#licenseFacilityTypes input[value="' + e + '"]').prop('checked', true);
                            });
                        }
                        // if (k == 'ts') $('#timeStart').val(v);
                        // if (k == 'te') $('#timeEnd').val(v);
                        // if (k == 'do') {
                        //     v.split(';').forEach(function(e) {
                        //         $('#daysOfOperation input[value="' + e + '"]').prop('checked', true);
                        //     });
                        // }
                        // if (k == 's') {
                        //     v.split(';').forEach(function(e) {
                        //         $('#schedules input[value="' + e + '"]').prop('checked', true);
                        //     });
                        // }
                        // if (k == 'p') {
                        //     v.split(';').forEach(function(e) {
                        //         $('#paymentTypes input[value="' + e + '"]').prop('checked', true);
                        //     });
                        // }
                        if (advancedFilterNames.indexOf(k) != -1) {
                            var displayType = $('#asi_' + k).data('displayType');
                            if (displayType === 'Picklist') {
                                $('#asi_' + k + ' select').val(v);
                            }
                            if (displayType === 'MultiPicklist' || displayType === 'String') {
                                v.split(';').forEach(function(e) {
                                    $('#asi_' + k + ' input[value="' + e + '"]').prop('checked', true);
                                });
                            }
                        }
                        if (k == 'p') {
                            v.split(';').forEach(function(e) {
                                $('#providerType input[value="' + e + '"]').prop('checked', true);
                            });
                        }
                    });
                }

                function onGoogleApiLoad() {
                    googleReady = true;
                    google.maps.event.addDomListener(window, 'resize', function() {
                        if (isListView()) {
                            smallMaps.forEach(function(map) {
                                redrawMap(map);
                            });
                        } else {
                            redrawMap(largeMap);
                        }
                    });
                    checkEverythingReady();
                }

                $(document).ready(function() {
                    $('#resultsMapA').on('shown.bs.tab', function (e) {
                        if (largeMap) {
                            redrawMap(largeMap);
                        }
                    });
                    //$('#searchTypeHelp').tooltip({'html': true});

                    updateFilters(location.search.substring(1));
                    // $('#youngestBirthdate, #oldestBirthdate').datepicker({'autoclose': true});

                    myList = Cookies.get(cookieString);
                    if (myList) {
                        myList = JSON.parse(myList);
                    } else {
                        myList = [];
                    }
                    updateMyListCount();

                    initialLoadDone = true;
                    onFilterChange();
                });
            </script>
                <script async="async" defer="defer" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD28nBYKwqn2zaKcZkj8OgmUwE5df3SEo4&amp;callback=onGoogleApiLoad"></script>
        </body>
    </html></html>
